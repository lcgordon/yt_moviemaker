
### Todo list: 
[done] Get Athena++ running with HDF5
    - Follow that one guy's instructions for the local download and build
    - https://gist.github.com/trwaters/b354fabdf7ef7c53ad259e0876f3d897
[done] Make some fake 3D data to visualize. Use the blast test, it'll be fine. 
- Set up all the routines you need for the project
    [done] Data loaders
    [done] Frame generators
    [done] File producers
    [done] Customizations for it
- Write the guide for making this package. 
    - write docs for it? 
    - how to use sphynx..this is a problem for future me that i am not looking forward to very much.
[done] Write tests for the routines
- Publish to github
- Promo on personal website

athena wiki: https://github.com/PrincetonUniversity/athena/wiki 


# Guide
Follow their (cookiecutter) download and setup steps
https://github.com/audreyfeldroy/cookiecutter-pypackage
To install locally, cd to dir, then pip install .
You have to redo this every time
Then in a separate file: 
    from yt_moviemaker import utils, yt_moviemaker
    utils.do_something_useful()
    x = yt_moviemaker.moviemaker()
    Yt required me to install open-mpi
https://gist.github.com/trwaters/1d5d28e2def25ad47b14c1518f4dca8e this worked for me (nope)

8/15
https://gist.github.com/trwaters/b354fabdf7ef7c53ad259e0876f3d897
- downloaded tarball https://support.hdfgroup.org/releases/hdf5/v1_14/v1_14_6/downloads/index.html
- opened
- ./configure --with-zlib=/home/lindseygordon/anaconda3/lib --disable-fortran --prefix=/opt/local --enable-shared --enable-parallel
    - could not find path to mpicc as instructions suggested but it configured without it? 
- make
    - this failed

8/16
- ./configure --with-zlib=/opt/anaconda3/lib --disable-fortran --prefix=/opt/local --enable-shared --enable-parallel
- unclear actually if the previous version failed or was just messy with errors?
- https://support.hdfgroup.org/downloads/index.html - you want the library and tools of the most recent version
- python configure.py --prob=kh -hdf5 --hdf5_path="/opt/local" -mpi --mpiccmd=mpic++

part 2:
things that compile: 
- python configure.py --prob=kh -hdf5 --hdf5_path="${CONDA_PREFIX}" [not linking to the hdf5 package]
- python configure.py --prob=kh -mpi --mpiccmd=mpic++
- python configure.py --prob=kh -hdf5 --hdf5_path="/opt/local" -mpi --mpiccmd=mpic++

things that do not compile:
- python configure.py --prob=kh -hdf5 --hdf5_path="${CONDA_PREFIX}" -mpi --mpiccmd=mpic++

- added export PATH="$PATH:/opt/anaconda3/lib" to my .bash_profile and THEN the given command worked
- python configure.py --prob=kh -hdf5 --hdf5_path="/opt/local" -mpi --mpiccmd=mpic++

- built blast test with: 
    python configure.py --prob blast -b --flux hlld -hdf5 --hdf5_path="/opt/local" -mpi --mpiccmd=mpic++
    (source config.ex.txt)

- set up ath_out/ folder w/ subfolder blast_test/ containing the input deck from the inputs/mhd folder
- run with mpiexec -n 8 ../../athena/bin/athena -i athinput.blast > log

- okay now we write python and crack the bitch open...


-----
Just went through this today and it was pretty useful - here's a breakdown of what I did on my M4 Mac running Sequoia 15.6: 
- ```
conda install mpi4py
- conda install -c conda-forge clangxx_osx-64
- conda install zlib
```
- Downloaded tarball from https://support.hdfgroup.org/releases/hdf5/v1_14/v1_14_6/downloads/index.html
- Unpacked it, cd into directory
- `make; make check; sudo make install`
- `./configure --with-zlib=/opt/anaconda3/lib --disable-fortran --prefix=/opt/local --enable-shared --enable-parallel`
- added `export PATH="$PATH:/opt/anaconda3/lib"` to my .bash_profile
- at this point `python configure.py --prob=kh -hdf5 --hdf5_path="/opt/local" -mpi --mpiccmd=mpic++` now compiles and runs
-----

8/27 
- i'm back
- got the movie generator for athena++ hdf5 files running
- need to add more options to the custom param dict
- other things? like how the other filetypes can be loaded
- why am i SO disorganized jfc

- how the fuck do you write tests for this thing

- install editable: [pip install --editable .]
    - this might allow me to make changes and scoot back and forth?

- python -m pytest
    - runs tests 
    - run from the top level of yt_moviemaker
    i honestly can't believe this works...
    write tests in there, run from cmd line at top of thing

9/3/25
- writing documentation. yeehaw. 
- their instructions of 'python setup.py docs' doesn't work
- ```make docs``` seems to be trying to do something
    - need to conda install sphinx (?)
    - sphinx-apidoc -o docs/ src/yt_moviemaker updated from just yt_moviemaker
- https://www.sphinx-doc.org/en/master/tutorial/getting-started.html
- https://samnicholls.net/2016/06/15/how-to-sphinx-readthedocs/ 
    - themes: https://www.sphinx-doc.org/en/master/usage/theming.html
- .. include:: ../../README.rst works!!

- make html after the first sphinx-build run

- added 'sphinx.ext.napoleon' extension
- wrote the docs, build looks okay